version: '3.8'

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: pharmavel-backend
    ports:
      - "3100:3000"
    environment:
      - NODE_ENV=development
      - DB_HOST=10.0.0.3
      - DB_PORT=3306
      - DB_DATABASE=pharmavelbd
      - DB_USERNAME=root
      - DB_PASSWORD=Rvel8080Ipv6**
      - JWT_SECRET=pharmavel-super-secret-jwt-key-change-in-production
      - JWT_EXPIRES_IN=1h
      - JWT_REFRESH_SECRET=pharmavel-refresh-secret-key-change-in-production
      - JWT_REFRESH_EXPIRES_IN=7d
    # Volúmenes comentados para producción - usar código compilado en imagen
    # volumes:
    #   - ./backend:/app
    #   - /app/node_modules
    networks:
      - pharmavel-network
    restart: unless-stopped

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    container_name: pharmavel-frontend
    ports:
      - "5173:5173"
    environment:
      - VITE_API_URL=http://10.0.0.3:3100
    volumes:
      - ./frontend:/app
      - /app/node_modules
    networks:
      - pharmavel-network
    restart: unless-stopped

networks:
  pharmavel-network:
    driver: bridge
